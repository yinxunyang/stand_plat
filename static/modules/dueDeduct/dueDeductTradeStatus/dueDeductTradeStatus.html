<div data-container="dueDeductTradeStatus">
    <component is="bv-table" :key="tags.tableId" v-bind="config"></component>
</div>
<script type="text/javascript">
    require(['jquery', 'util', 'Const'], function ($, util, Const) {
        var vm = util.bind({
            container: 'dueDeductTradeStatus',
            data: {
                tags: {
                    tableId: 'dueDeductTradeStatusTable'
                },
                config: {
                    entityName: 'plBatchTradeSts',
                    keys: 'id',
                    filterLayout: 'filterMore',
                    // 下面属性设置为false可以预设为隐藏查询条件
                    // filterVisible: false,
                    orders: 'createTime desc',
                    select: 'checkbox',
                    columns: [
                        {
                            name: 'id',
                            head: 'id',
                            filter: '='
                        },
                        {
                            name: 'batchCollectId',
                            head: '到期扣款汇总Id',
                            filter: '='
                        },
                        {
                            name: 'contNo',
                            head: '合同号',
                            filter: '='
                        },
                        {
                            name: 'casBatchNo',
                            head: '账户系统批次号',
                            filter: '='
                        },
                        {
                            name: 'inTradeStatus',
                            head: '内部交易状态',
                            filter: 'select',
                            config: {
                                format: 'dict',
                                preset: 'enums',
                                choose: Const.enums.handleStatusEnum
                            }
                        },
                        {
                            name: 'inTradeCode',
                            head: '内部交易返回码'
                        },
                        {
                            name: 'inTradeDesc',
                            head: '内部交易返回描述'
                        },
                        {
                            name: 'inTradeTime',
                            head: '内部交易时间'
                        },
                        {
                            name: 'inChargeStatus',
                            head: '内部记账状态',
                            filter: 'select',
                            config: {
                                format: 'dict',
                                preset: 'enums',
                                choose: Const.enums.handleStatusEnum
                            }
                        },
                        {
                            name: 'inChargeCode',
                            head: '内部记账返回码'
                        },
                        {
                            name: 'inChargeDesc',
                            head: '内部记账返回描述'
                        },
                        {
                            name: 'inChargeTime',
                            head: '内部记账时间'
                        },
                        {
                            name: 'outTradeStatus',
                            head: '外部交易状态',
                            filter: 'select',
                            config: {
                                format: 'dict',
                                preset: 'enums',
                                choose: Const.enums.handleStatusEnum
                            }
                        },
                        {
                            name: 'outTradeCode',
                            head: '外部交易返回码'
                        },
                        {
                            name: 'outTradeDesc',
                            head: '外部交易返回描述'
                        },
                        {
                            name: 'outTradeTime',
                            head: '外部交易时间'
                        },
                        {
                            name: 'outChargeStatus',
                            head: '外部记账状态',
                            filter: 'select',
                            config: {
                                format: 'dict',
                                preset: 'enums',
                                choose: Const.enums.handleStatusEnum
                            }
                        },
                        {
                            name: 'outChargeCode',
                            head: '外部记账返回码'
                        },
                        {
                            name: 'outChargeDesc',
                            head: '外部记账返回描述'
                        },
                        {
                            name: 'outChargeTime',
                            head: '外部记账时间'
                        },
                        {
                            name: 'splitStatus',
                            head: '拆分标识',
                            filter: {
                                type: 'radio'
                            },
                            config: {
                                format: 'dict',
                                preset: 'enums',
                                choose: Const.enums.yesNoEnum
                            }
                        },
                        {
                            name: 'capBuyoutInd',
                            head: '是否已买断',
                            filter: {
                                type: 'radio'
                            },
                            config: {
                                format: 'dict',
                                preset: 'enums',
                                choose: Const.enums.yesNoEnum
                            }
                        },
                        {
                            name: 'capSetlDesc',
                            head: '备注'
                        },
                        {
                            name: 'createTime',
                            head: '创建时间',
                            filter: {
                                operate: 'between',
                                type: 'date'
                            },
                            config: {
                                format: 'datetime',
                                defaultValueFrom: util.date()
                            }
                        },
                        {
                            name: 'updateTime',
                            head: '修改时间',
                            filter: {
                                operate: 'between',
                                type: 'date'
                            },
                            config: {
                                format: 'datetime',
                                defaultValueFrom: util.date()
                            }
                        }
                    ],
                    operates: [
                        {
                            text: '置为失败',
                            clazz: 'btn-primary',
                            show: 'oneOrMore',
                            loading: '处理中...',
                            id: 'deductTradeStsFail',
                            auth: 'true',
                            click: function ($element, name, entityName, selected) {
                                var idList = [];
                                for (var i = 0; i < selected.length; i++) {
                                    idList.push(selected[i].id);
                                }
                                if (idList.length > 1) {
                                    util.alert("请选择唯一的一条数据")
                                } else {
                                    util.confirm({
                                        content: '请确认是否将选择的数据置为失败？',
                                        confirmText: '置为失败',
                                        url: '/api/plr/deductTradeStsFail',
                                        data: idList,
                                        refresh: true,
                                        vm: this
                                    })
                                }

                            }
                        },
                        {
                            id: 'deductTradeStsSuccess',
                            text: '置为成功',
                            clazz: 'btn-primary',
                            auth: true,
                            show: 'oneOrMore',
                            preset: 'update',
                            click: function ($element, name, entityName, selected) {
                                var idList = [];
                                for (var i = 0; i < selected.length; i++) {
                                    idList.push(selected[i].id);
                                }
                                if (idList.length > 1) {
                                    util.alert("请选择唯一的一条数据")
                                } else {
                                    util.modal({
                                        url: 'modules/dueDeduct/dueDeductTradeStatus/deductTradeStsToSuccess.html?deductTradeSts=' + util.json(selected[0]),
                                        refresh: true,
                                        vm: this
                                    })
                                }
                            }
                        }
                    ]
                }
            }
        });
    });
</script>

